# prbetter-web
### Environment
![OS](https://img.shields.io/badge/OS-Windows_%7C_macOS_%7C_Linux-8A2BE2?style=flat-square)
[![Java](https://img.shields.io/badge/Java-21-ED8B00?style=flat-square&logo=openjdk&logoColor=white)](https://www.oracle.com/java/)
[![GCP](https://img.shields.io/badge/Cloud-Google_Cloud-4285F4?style=flat-square&logo=google-cloud&logoColor=white)](https://cloud.google.com/)
[![Frontend](https://img.shields.io/badge/Frontend-Pure_HTML5-E34F26?style=flat-square&logo=html5&logoColor=white)](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5)
[![Backend](https://img.shields.io/badge/Back--end-JDK_HttpServer-ED8B00?style=flat-square&logo=openjdk&logoColor=white)](https://docs.oracle.com/en/java/javase/21/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpServer.html)
[![Gradle](https://img.shields.io/badge/Build-Gradle-02303A?style=flat-square&logo=gradle&logoColor=white)](https://gradle.org/)

### Development
[![Jakarta Mail](https://img.shields.io/badge/Jakarta_Mail-2.1.3-F37029?style=flat-square&logo=jakartaee&logoColor=white)](https://jakarta.ee/specifications/mail/)
[![Lombok](https://img.shields.io/badge/Tools-Lombok-BC0230?style=flat-square&logo=lombok&logoColor=white)](https://projectlombok.org/)
[![Jackson](https://img.shields.io/badge/JSON-Jackson-007ec6?style=flat-square&logo=json&logoColor=white)](https://github.com/FasterXML/jackson)
[![SLF4J](https://img.shields.io/badge/Logging-SLF4J-005571?style=flat-square)](https://www.slf4j.org/)

### Testing
[![JUnit5](https://img.shields.io/badge/Test-JUnit5-25A162?style=flat-square&logo=junit5&logoColor=white)](https://junit.org/junit5/)
[![Mockito](https://img.shields.io/badge/Test-Mockito-81B518?style=flat-square&logo=mockito&logoColor=white)](https://site.mockito.org/)
[![AssertJ](https://img.shields.io/badge/Test-AssertJ-2C2255?style=flat-square)](https://assertj.github.io/doc/)
[![Coverage](https://img.shields.io/badge/Coverage-80%25-green?style=flat-square)](https://htmlpreview.github.io/?https://github.com/HyoYoonNam/prbetter-web/blob/main/htmlReport/index.html)

### Meta
[![WoowaCourse](https://img.shields.io/badge/Project_For-WoowaCourse_Pre--course-00C854?style=flat-square&logo=woowabrothers&logoColor=white)](https://woowacourse.github.io/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg?style=flat-square)](https://opensource.org/licenses/MIT)
[![Docusaurus](https://img.shields.io/badge/Docs-Docusaurus-3ECC5F?style=flat-square&logo=docusaurus&logoColor=white)](ì—¬ê¸°ì—_ë„íì‚¬ìš°ë£¨ìŠ¤_ì‚¬ì´íŠ¸_URL_ì…ë ¥)
[![DuckDNS](https://img.shields.io/badge/DNS-DuckDNS-c0d33e?style=flat-square)](https://www.duckdns.org/)
![Last Commit](https://img.shields.io/github/last-commit/hyoyoonnam/prbetter-web?style=flat-square&color=important)

---
prbetter-webì€ [prbetter-console](https://github.com/HyoYoonNam/prbetter-console)ì˜ ê¸°ëŠ¥ì„ ê¸°ë°˜ìœ¼ë¡œ ì œì‘í•œ ì´ˆê²½ëŸ‰ ì›¹ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

## ğŸ“ƒ ëª©ì°¨
[ê°œë°œ ë°°ê²½](#-ê°œë°œ-ë°°ê²½)  
[ì„¤ì¹˜ì™€ ì‚¬ìš© ë°©ë²•](#-ì„¤ì¹˜ì™€-ì‚¬ìš©-ë°©ë²•)
[ì½˜ì†” í”„ë¡œê·¸ë¨ê³¼ ë¹„êµí•´ì„œ ë¬´ì—‡ì´ ë‹¬ë¼ì¡Œë‚˜ìš”?](#-ì½˜ì†”-í”„ë¡œê·¸ë¨ê³¼-ë¹„êµí•´ì„œ-ë¬´ì—‡ì´-ë‹¬ë¼ì¡Œë‚˜ìš”)

## ğŸ’¡ ê°œë°œ ë°°ê²½
ìš°ì•„í•œí…Œí¬ì½”ìŠ¤ í”„ë¦¬ì½”ìŠ¤(ì´í•˜ 'ìš°í…Œì½”')ì— ì°¸ê°€í•˜ë©´ì„œ ëŠë‚€ ìƒí˜¸ ì½”ë“œ ë¦¬ë·° ë¬¸í™”ì˜ í™œì„±í™”ë¥¼ ìœ„í•´ ìœ„í•´ ë¦¬ë·°í•  [prbetter-console](https://github.com/HyoYoonNam/prbetter-console)ì„ êµ¬í˜„í–ˆì—ˆì–´ìš”.

í•˜ì§€ë§Œ ì½˜ì†” í”„ë¡œê·¸ë¨ì—ì„œëŠ” ì‚¬ìš©ìê°€ ì§ì ‘ jar íŒŒì¼ì„ êµ¬ë™í•˜ê³ , ë¦¬ë·°í•  PRì„ ì¶”ì²œ ë°›ìœ¼ë ¤ê³  í•  ë•Œë§ˆë‹¤ í”„ë¡œê·¸ë¨ì— ëª…ë ¹í•´ì•¼ í•˜ëŠ” ë¶ˆí¸í•¨ì´ ìˆì—ˆì–´ìš”.

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì›¹ì„œë¹„ìŠ¤ë¡œ êµ¬í˜„í•¨ê³¼ í•¨ê»˜ ë©”ì¼ ì •ê¸° ë°œì†¡ ê¸°ëŠ¥ì„ ì¶”ê°€í–ˆì–´ìš”!

## âš™ï¸ ì„¤ì¹˜ì™€ ì‚¬ìš© ë°©ë²•
ë¨¼ì €, http://prbetter.duckdns.org:8080/ ì— ì ‘ì†í•©ë‹ˆë‹¤.

### PR ì¦‰ì‹œ ì¶”ì²œë°›ê¸°
![usage-example-immediately](assets/usage-example-immediately.png)

í‘œì‹œëœ ì˜ì—­ì—ì„œ ì–¸ì–´ì™€ ë¯¸ì…˜ì„ ì„ íƒí•˜ê³ , **Better!** ë²„íŠ¼ì„ ëˆ„ë¦…ë‹ˆë‹¤.

<br>

![usage-example-immediately-result](assets/usage-example-immediately-result.png)

ì¶”ì²œì´ ì™„ë£Œëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ë§¤ì¼ ì˜¤ì „ 10ì‹œì— ë©”ì¼ë¡œ ì¶”ì²œë°›ê¸°
![usage-example-mail-service](assets/usage-example-mail-service.png)

í‘œì‹œëœ ì˜ì—­ì—ì„œ ì´ë©”ì¼ì„ ì…ë ¥í•˜ê³  ì¶”ì²œë°›ì„ ê¸°ê°„, ì–¸ì–´, ë¯¸ì…˜ì„ ì„ íƒí•œ ë’¤ì— **ì´ë©”ì¼ ì„œë¹„ìŠ¤ ë“±ë¡í•˜ê¸°** ë²„íŠ¼ì„ ëˆ„ë¦…ë‹ˆë‹¤.

<br>

![usage-example-mail-service-result](assets/usage-example-mail-service-result.png)

ì •ê¸° ë°œì†¡ ìŠ¤ì¼€ì¥´ì— ë“±ë¡ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## â“ ì½˜ì†” í”„ë¡œê·¸ë¨ê³¼ ë¹„êµí•´ì„œ ë¬´ì—‡ì´ ë‹¬ë¼ì¡Œë‚˜ìš”?
### ì›¹ ì„œë¹„ìŠ¤
![compare-using-sequence-between-console-and-web](assets/compare-using-sequence-between-console-and-web.png)
(ì¢Œì¸¡ ì‚¬ì§„) Javaë¥¼ ì„¤ì¹˜í•˜ê³ , jar íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ í•˜ê³ , ë¡œì»¬ í™˜ê²½ì—ì„œ ì§ì ‘ ì‹¤í–‰ì‹œì¼œì•¼ í•˜ëŠ” ì½˜ì†” í”„ë¡œê·¸ë¨ê³¼ ë‹¤ë¥´ê²Œ,  
(ìš°ì¸¡ ì‚¬ì§„) ë‹¨ìˆœíˆ [ì›¹ì‚¬ì´íŠ¸](prbetter.duckdns.org:8080)ì— ë°©ë¬¸í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### GitHub API í˜¸ì¶œ ìµœì†Œí™”
```java
public final class PullRequestInitializer {
    public void init(List<GitHubRepositoryName> repositoryNames) {
        log.info("ë¦¬í¬ì§€í† ë¦¬ì˜ pull request ëª©ë¡ ì´ˆê¸°í™”");
        for (GitHubRepositoryName gitHubRepositoryName : repositoryNames) {
            String filePath = "./pullrequest/" + gitHubRepositoryName.value() + ".json";

            // íŒŒì¼ë¡œ ì´ë¯¸ ê´€ë¦¬ë˜ê³  ìˆìœ¼ë©´ íŒŒì¼ì—ì„œ ë©”ëª¨ë¦¬ ë¦¬í¬ì§€í† ë¦¬ë¡œ ë¶ˆëŸ¬ ì˜´
            if (FileUtils.exists(filePath)) {
                log.info("{}ì— ëŒ€í•œ íŒŒì¼ì´ ì¡´ì¬í•¨. íŒŒì¼ ì½ê¸°: ", gitHubRepositoryName);
                loadService.loadFromFile(repository, gitHubRepositoryName, filePath);
                continue;
            }

            // íŒŒì¼ë¡œ ê´€ë¦¬ë˜ê³  ìˆì§€ ì•Šìœ¼ë©´ APIë¥¼ í˜¸ì¶œí•´ì„œ ë¡œë“œ
            log.info("{}ì— ëŒ€í•œ íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŒ. API í˜¸ì¶œ: ", gitHubRepositoryName);
            loadService.loadFromGitHub(gitHubRepositoryName);
        }
    }
}

public final class PullRequestLoadService {
    public void loadFromGitHub(GitHubRepositoryName name) {
        log.info("Load pull requests from GitHub reposiotry: {}", name.value());
        readService.readAllPages(name).stream()
                .filter(PullRequest::isValidTitle)
                .forEach(pr -> pullRequestRepository.save(name, pr));

        File directory = new File("./pullrequest/");
        if (!directory.exists()) {
            directory.mkdir();
        }
        String filePath = "./pullrequest/" + name.value() + ".json";
        log.info("Write to file: path={}", filePath);
        List<PullRequest> founds = pullRequestRepository.findAll(name);
        JsonPullRequestMapper.writeToFile(filePath, founds);
    }
}
```
í•œë²ˆ GitHub APIë¥¼ í˜¸ì¶œí•´ì„œ ë¡œë“œí•œ PR ë°ì´í„°ë“¤ì€ ì„œë²„ì—ì„œ íŒŒì¼ë¡œ ì €ì¥í•˜ì—¬ ê´€ë¦¬í•©ë‹ˆë‹¤.

ë•ë¶„ì— ì„œë²„ì¸¡ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹¤ì‹œ ì‹¤í–‰í•  ë•Œ, ì´ë¯¸ íŒŒì¼ë¡œ ì €ì¥ë˜ì–´ ìˆëŠ” ê²½ìš°ì—ëŠ” API í˜¸ì¶œì„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

### GitHUB API í˜¸ì¶œì‹œ ì„œë²„ì¸¡ ì¸ì¦ í† í° ì‚¬ìš©
```java
public final class PullRequestReadService {
    private HttpRequest getRequest(GitHubRepositoryName name, int page) {
        URI apiUri = URI.create(API_URI_PREFIX + name.value() + API_URI_POSTFIX + "?per_page=30" + "&page=" + page);
        return HttpRequest.newBuilder()
                .GET()
                .uri(apiUri)
                .header("Accept", "application/vnd.github.json")
                .header("Authorization", "Bearer " + FileUtils.readString(GITHUB_AUTHORIZATION_TOKEN_PATH).strip())
                .build();
    }
}
```
prbetter-consoleì—ì„œëŠ” `Authorization` í—¤ë”ë¥¼ ìš”ì²­ì— í¬í•¨í•˜ì§€ ì•Šì•˜ê³ , ë¡œì»¬ì—ì„œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— í”„ë¡œê·¸ë¨ ì‹¤í–‰ì IP ê¸°ë°˜ìœ¼ë¡œ ì ì€ íšŸìˆ˜(ì‹œê°„ë‹¹ 60íšŒ)ì˜ API í˜¸ì¶œë§Œì´ ê°€ëŠ¥í–ˆìŠµë‹ˆë‹¤.

prbetter-webì—ì„œëŠ” ìš”ì²­ í—¤ë”ì— ì¸ì¦ ì •ë³´ë¥¼ í¬í•¨í•˜ì—¬ API í˜¸ì¶œ ì œí•œì„ í¬ê²Œ ëŠ˜ë¦¬ê³ (ì‹œê°„ë‹¹ 5,000íšŒ), API í˜¸ì¶œ ìì²´ë„ ì„œë²„ì¸¡ì—ì„œ ë‹´ë‹¹í•˜ë¯€ë¡œ ì‚¬ìš©ìëŠ” ì‹ ê²½ì“°ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤. 

### ë©”ì¼ ì •ê¸° ë°œì†¡ ì„œë¹„ìŠ¤
![email-recommended-example](assets/email-recommended-example.png)

ì •ê¸° ë°œì†¡ ìŠ¤ì¼€ì¥´ì— ë“±ë¡í•˜ë©´, ë§¤ì¼ 10ì‹œ ì •ê°ì— PRì„ ìë™ìœ¼ë¡œ ì¶”ì²œë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
